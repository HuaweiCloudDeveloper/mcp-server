{
  "openapi" : "3.0.0",
  "info" : {
    "description" : "OptVerse-OptVerse Service",
    "title" : "OptVerse",
    "version" : "2025-07-30",
    "x-host_prefix" : "optverse"
  },
  "servers" : [ {
    "url" : "/"
  } ],
  "components" : {
    "parameters" : {
      "X-Auth-Token" : {
        "name" : "X-Auth-Token",
        "in" : "header",
        "description" : "用户Token。",
        "required" : true,
        "schema" : {
          "example" : "MIINRwYJKoZIhvcNAQcCoIINODCCDTQCAQExDTALBglghkgBZQMEAgEwgguVBgkqhkiG...",
          "description" : "用户Token。",
          "type" : "string"
        },
        "type" : "object"
      }
    },
    "schemas" : {
      "TaskBo" : {
        "type" : "object",
        "required" : [ "task_id", "status" ],
        "properties" : {
          "task_id" : {
            "type" : "string",
            "description" : "任务ID"
          },
          "input_json" : {
            "type" : "object",
            "description" : "用户输入"
          },
          "status" : {
            "type" : "string",
            "description" : "状态",
            "enum" : [ "Running", "Pending", "Expired", "Unknown", "Failed", "Succeeded", "Stopped", "Deleted" ]
          },
          "progress" : {
            "type" : "object",
            "description" : "任务进度"
          },
          "output_json" : {
            "type" : "object",
            "description" : "输出"
          },
          "start_time" : {
            "type" : "string",
            "format" : "date-time",
            "description" : "开始时间"
          },
          "end_time" : {
            "type" : "string",
            "format" : "date-time",
            "description" : "结束时间"
          },
          "create_time" : {
            "type" : "string",
            "format" : "date-time",
            "description" : "创建时间"
          }
        }
      },
      "ErrorRsp" : {
        "type" : "object",
        "description" : "失败时返回的错误对象",
        "required" : [ "error_code", "error_msg" ],
        "properties" : {
          "error_code" : {
            "type" : "string",
            "description" : "错误码",
            "minLength" : 8,
            "maxLength" : 36
          },
          "error_msg" : {
            "type" : "string",
            "description" : "错误描述",
            "minLength" : 2,
            "maxLength" : 512
          }
        }
      },
      "TaskDto" : {
        "description" : "任务请求信息",
        "type" : "object",
        "required" : [ "input_json" ],
        "properties" : {
          "input_json" : {
            "description" : "任务输入信息,json格式;每个子服务该对象结构不同,框架层不解析具体key,运行态直接透传给子服务REST API处理(参数合法性校验 只能子服务镜像内进行;当前算法镜像提供单独校验接口和处理接口,后续待统一交互机制)",
            "type" : "object"
          }
        }
      },
      "CreateTaskResponseBody" : {
        "type" : "object",
        "properties" : {
          "task_id" : {
            "type" : "string",
            "description" : "任务的唯一ID"
          }
        },
        "description" : "创建任务成功的响应消息",
        "required" : [ "task_id" ]
      },
      "TaskListVo" : {
        "type" : "object",
        "description" : "查询任务成功响应消息",
        "required" : [ "count", "tasks" ],
        "properties" : {
          "count" : {
            "type" : "integer",
            "format" : "int32",
            "description" : "任务数量",
            "minimum" : 0
          },
          "tasks" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/TaskListItemVo"
            },
            "description" : "任务列表项视图"
          }
        }
      },
      "TaskListItemVo" : {
        "type" : "object",
        "description" : "单个任务详情数据",
        "required" : [ "task_id", "status", "start_time", "end_time", "create_time" ],
        "properties" : {
          "task_id" : {
            "type" : "string",
            "description" : "任务ID"
          },
          "status" : {
            "type" : "string",
            "description" : "任务状态",
            "enum" : [ "Running", "Pending", "Expired", "Unknown", "Failed", "Succeeded", "Stopped", "Deleted" ]
          },
          "start_time" : {
            "type" : "string",
            "description" : "开始时间"
          },
          "end_time" : {
            "type" : "string",
            "description" : "结束时间",
            "example" : "2024-05-16T08:40:00.663Z"
          },
          "create_time" : {
            "type" : "string",
            "description" : "创建时间",
            "example" : "2024-05-16T08:40:00.453Z"
          }
        }
      }
    },
    "securitySchemes" : { }
  },
  "paths" : {
    "/ShowTask" : {
      "get" : {
        "tags" : [ "OptVerse Service" ],
        "summary" : "获取任务详情",
        "description" : "获取任务详情",
        "operationId" : "ShowTask",
        "responses" : {
          "200" : {
            "description" : "成功获取任务详情",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/TaskBo"
                }
              }
            }
          },
          "400" : {
            "description" : "请求参数错误",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ErrorRsp"
                }
              }
            }
          },
          "500" : {
            "description" : "服务内部错误",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ErrorRsp"
                }
              }
            }
          }
        },
        "parameters" : [ {
          "$ref" : "#/components/parameters/X-Auth-Token"
        }, {
          "name" : "project_id",
          "in" : "path",
          "description" : "项目ID",
          "required" : true,
          "schema" : {
            "description" : "项目ID",
            "type" : "string",
            "maxLength" : 32,
            "minLength" : 32
          }
        }, {
          "name" : "service_type",
          "in" : "path",
          "description" : "服务类型,针对不同服务,为用户提前填充对应值,用户侧不需单独赋值;二维切割-方形件固定为 regular-plate,二维切割-异形件固定为 irregular-textile, 数学规划求解器固定为 optverse-mpsolver",
          "required" : true,
          "schema" : {
            "description" : "服务类型,针对不同服务,为用户提前填充对应值,用户侧不需单独赋值;二维切割-方形件固定为 regular-plate,二维切割-异形件固定为 irregular-textile, 数学规划求解器固定为 optverse-mpsolver",
            "type" : "string",
            "maxLength" : 512,
            "minLength" : 0
          }
        }, {
          "name" : "task_id",
          "in" : "path",
          "description" : "任务id",
          "required" : true,
          "schema" : {
            "description" : "任务id",
            "type" : "string",
            "maxLength" : 36,
            "minLength" : 36
          }
        }, {
          "name" : "input_enable",
          "in" : "query",
          "description" : "是否返回输入信息,默认为false; 当前暂不支持该功能,后续扩展",
          "required" : false,
          "schema" : {
            "description" : "是否返回输入信息,默认为false; 当前暂不支持该功能,后续扩展",
            "type" : "boolean"
          }
        } ]
      },
      "x-method" : "get",
      "x-content-type" : "application/json;charset=UTF-8",
      "x-operationId" : "ShowTask",
      "x-url" : "{endpoint}/v2/{project_id}/optverse/{service_type}/tasks/{task_id}"
    },
    "/CreateTask" : {
      "post" : {
        "tags" : [ "OptVerse Service" ],
        "summary" : "创建任务",
        "description" : "创建任务",
        "operationId" : "CreateTask",
        "responses" : {
          "201" : {
            "description" : "成功创建任务",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/CreateTaskResponseBody"
                }
              }
            }
          },
          "400" : {
            "description" : "请求参数错误",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ErrorRsp"
                }
              }
            }
          },
          "500" : {
            "description" : "服务内部错误",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ErrorRsp"
                }
              }
            }
          }
        },
        "parameters" : [ {
          "$ref" : "#/components/parameters/X-Auth-Token"
        }, {
          "name" : "project_id",
          "in" : "path",
          "description" : "项目ID",
          "required" : true,
          "schema" : {
            "description" : "项目ID",
            "type" : "string",
            "maxLength" : 32,
            "minLength" : 32
          }
        }, {
          "name" : "service_type",
          "in" : "path",
          "description" : "服务类型,针对不同服务,为用户提前填充对应值,用户侧不需单独赋值;二维切割-方形件固定为 regular-plate,二维切割-异形件固定为 irregular-textile, 数学规划求解器固定为 optverse-mpsolver",
          "required" : true,
          "schema" : {
            "description" : "服务类型,针对不同服务,为用户提前填充对应值,用户侧不需单独赋值;二维切割-方形件固定为 regular-plate,二维切割-异形件固定为 irregular-textile, 数学规划求解器固定为 optverse-mpsolver",
            "type" : "string",
            "maxLength" : 128,
            "minLength" : 1
          }
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/TaskDto"
              }
            }
          },
          "required" : true
        }
      },
      "x-method" : "post",
      "x-content-type" : "application/json;charset=UTF-8",
      "x-operationId" : "CreateTask",
      "x-url" : "{endpoint}/v2/{project_id}/optverse/{service_type}/tasks"
    },
    "/DeleteTask" : {
      "delete" : {
        "tags" : [ "OptVerse Service" ],
        "summary" : "删除任务",
        "description" : "删除任务",
        "operationId" : "DeleteTask",
        "responses" : {
          "200" : {
            "description" : "成功删除任务"
          },
          "400" : {
            "description" : "请求参数错误",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ErrorRsp"
                }
              }
            }
          },
          "500" : {
            "description" : "服务内部错误",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ErrorRsp"
                }
              }
            }
          }
        },
        "parameters" : [ {
          "$ref" : "#/components/parameters/X-Auth-Token"
        }, {
          "name" : "project_id",
          "in" : "path",
          "description" : "项目ID",
          "required" : true,
          "schema" : {
            "description" : "项目ID",
            "type" : "string"
          }
        }, {
          "name" : "service_type",
          "in" : "path",
          "description" : "服务类型,针对不同服务,为用户提前填充对应值,用户侧不需单独赋值;二维切割-方形件固定为 regular-plate,二维切割-异形件固定为 irregular-textile, 数学规划求解器固定为 optverse-mpsolver",
          "required" : true,
          "schema" : {
            "description" : "服务类型,针对不同服务,为用户提前填充对应值,用户侧不需单独赋值;二维切割-方形件固定为 regular-plate,二维切割-异形件固定为 irregular-textile, 数学规划求解器固定为 optverse-mpsolver",
            "type" : "string"
          }
        }, {
          "name" : "task_id",
          "in" : "path",
          "description" : "任务id",
          "required" : true,
          "schema" : {
            "description" : "任务id",
            "type" : "string"
          }
        } ]
      },
      "x-method" : "delete",
      "x-content-type" : "application/json;charset=UTF-8",
      "x-operationId" : "DeleteTask",
      "x-url" : "{endpoint}/v2/{project_id}/optverse/{service_type}/tasks/{task_id}"
    },
    "/ListTask" : {
      "get" : {
        "tags" : [ "OptVerse Service" ],
        "summary" : "查询任务列表",
        "description" : "查询任务列表",
        "operationId" : "ListTask",
        "responses" : {
          "200" : {
            "description" : "成功获取任务列表",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/TaskListVo"
                }
              }
            }
          },
          "400" : {
            "description" : "请求参数错误",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ErrorRsp"
                }
              }
            }
          },
          "500" : {
            "description" : "服务内部错误",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/ErrorRsp"
                }
              }
            }
          }
        },
        "parameters" : [ {
          "$ref" : "#/components/parameters/X-Auth-Token"
        }, {
          "name" : "project_id",
          "in" : "path",
          "description" : "项目ID",
          "required" : true,
          "schema" : {
            "description" : "项目ID",
            "type" : "string",
            "maxLength" : 32,
            "minLength" : 32
          }
        }, {
          "name" : "service_type",
          "in" : "path",
          "description" : "服务类型,针对不同服务,为用户提前填充对应值,用户侧不需单独赋值;二维切割-方形件固定为 regular-plate,二维切割-异形件固定为 irregular-textile, 数学规划求解器固定为 optverse-mpsolver",
          "required" : true,
          "schema" : {
            "description" : "服务类型,针对不同服务,为用户提前填充对应值,用户侧不需单独赋值;二维切割-方形件固定为 regular-plate,二维切割-异形件固定为 irregular-textile, 数学规划求解器固定为 optverse-mpsolver",
            "type" : "string",
            "maxLength" : 128,
            "minLength" : 1
          }
        }, {
          "name" : "limit",
          "in" : "query",
          "description" : "限制量,单次查询总量,必须由数字组成,默认为300,取值范围[1,300]",
          "required" : false,
          "schema" : {
            "description" : "限制量,单次查询总量,必须由数字组成,默认为300,取值范围[1,300]",
            "type" : "integer",
            "default" : 300,
            "maximum" : 300,
            "minimum" : 1
          }
        }, {
          "name" : "offset",
          "in" : "query",
          "description" : "偏移量,查询起始偏移,必须由数字组成,默认为0,取值范围[0,100000000]",
          "required" : false,
          "schema" : {
            "description" : "偏移量,查询起始偏移,必须由数字组成,默认为0,取值范围[0,100000000]",
            "type" : "integer",
            "default" : 0,
            "maximum" : 100000000,
            "minimum" : 0
          }
        } ]
      },
      "x-method" : "get",
      "x-content-type" : "application/json;charset=UTF-8",
      "x-operationId" : "ListTask",
      "x-url" : "{endpoint}/v2/{project_id}/optverse/{service_type}/tasks"
    }
  }
}