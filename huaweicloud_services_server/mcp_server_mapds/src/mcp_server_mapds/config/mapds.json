{
  "openapi" : "3.0.0",
  "info" : {
    "description" : "MapDS-凭证管理",
    "title" : "MapDS",
    "version" : "2025-07-30",
    "x-host_prefix" : "mapds"
  },
  "servers" : [ {
    "url" : "/"
  } ],
  "components" : {
    "parameters" : { },
    "schemas" : {
      "CreateSasTokenRequestBody" : {
        "properties" : {
          "keytype" : {
            "type" : "string",
            "example" : "primary",
            "description" : "用于为用户生成令牌的密钥"
          },
          "expiry" : {
            "type" : "string",
            "example" : "2019-04-21T00:44:24Z",
            "description" : "令牌到期UTC时间,格式如:2019-04-21T00:44:24Z"
          }
        },
        "required" : [ "keytype", "expiry" ],
        "type" : "object"
      },
      "CreateSasTokenResp" : {
        "type" : "object",
        "properties" : {
          "client_id" : {
            "type" : "string",
            "example" : "ecfb52c6e2fc43d391a9ea9ab1e60d61",
            "description" : "API key的client_id"
          },
          "expiry" : {
            "type" : "string",
            "example" : "2022-07-20T12:12:12Z",
            "description" : "超期时间,UTC格式"
          },
          "signature" : {
            "type" : "string",
            "example" : "tXyTn9LBnQzuI4FOAHgPDFdW28G34ZFSwCzEv72ZXnE%3D",
            "description" : "签名字符串"
          }
        }
      },
      "Credential" : {
        "properties" : {
          "key" : {
            "type" : "string",
            "description" : "凭证"
          },
          "create_time" : {
            "type" : "string",
            "description" : "创建凭证的时间UTC时间格式:YYYY-mm-dd'T'HH:mm:ss.SSSSSS'Z',e.g. \"2020-01-08T06:26:08.123059Z\""
          },
          "description" : {
            "type" : "string",
            "description" : "凭证的描述信息。"
          },
          "status" : {
            "type" : "string",
            "description" : "凭证状态“ACTIVE”"
          }
        },
        "description" : "凭证信息。",
        "type" : "object"
      },
      "CreateCredentialRequestBody" : {
        "properties" : {
          "credential" : {
            "properties" : {
              "description" : {
                "type" : "string",
                "example" : "primary key in use"
              }
            }
          }
        },
        "type" : "object"
      },
      "CredentialsResp" : {
        "type" : "object",
        "description" : "凭证信息。",
        "properties" : {
          "credentials" : {
            "items" : {
              "properties" : {
                "uuid" : {
                  "type" : "string",
                  "example" : "7881a0be58d0424db30d95757986fd38",
                  "description" : "凭证id"
                },
                "key" : {
                  "type" : "string",
                  "example" : "C3qeo9YYv550WyVJ6z9C4QL8BYR6h9IvniFLR73kplPpG5ci",
                  "description" : "凭证value"
                },
                "create_time" : {
                  "type" : "string",
                  "example" : "2022-10-19T12:12:21.000000Z",
                  "description" : "凭证创建时间"
                },
                "description" : {
                  "type" : "string",
                  "example" : "Auto create key on 2022-10-19 20:10:05.070140",
                  "description" : "凭证描述"
                },
                "status" : {
                  "type" : "string",
                  "example" : "ACTIVE",
                  "description" : "凭证状态"
                }
              }
            },
            "description" : "凭证信息。",
            "type" : "array"
          }
        }
      }
    },
    "securitySchemes" : { }
  },
  "paths" : {
    "/CreateSasToken" : {
      "post" : {
        "tags" : [ "凭证管理" ],
        "summary" : "创建SAS Token",
        "description" : "创建SAS token凭据,用于访问瓦片。",
        "operationId" : "CreateSasToken",
        "responses" : {
          "200" : {
            "description" : "成功",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/CreateSasTokenResp"
                }
              }
            }
          },
          "400" : {
            "description" : "客户端错误,参数无效。",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "string"
                }
              }
            }
          },
          "403" : {
            "description" : "没有操作权限。",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "string"
                }
              }
            }
          },
          "500" : {
            "description" : "内部服务错误。",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "string"
                }
              }
            }
          },
          "503" : {
            "description" : "服务不可用。",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "string"
                }
              }
            }
          }
        },
        "parameters" : [ {
          "name" : "X-Auth-Token",
          "in" : "header",
          "description" : "IAM用户的token,无需特殊权限。",
          "required" : true,
          "schema" : {
            "description" : "IAM用户的token,无需特殊权限。",
            "type" : "string"
          }
        }, {
          "name" : "Content-Type",
          "in" : "header",
          "description" : "该字段填为“application/json;charset=utf8”。",
          "required" : true,
          "schema" : {
            "description" : "该字段填为“application/json;charset=utf8”。",
            "type" : "string"
          }
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/CreateSasTokenRequestBody"
              }
            }
          },
          "required" : true
        }
      },
      "x-method" : "post",
      "x-content-type" : "application/json;charset=UTF-8",
      "x-operationId" : "CreateSasToken",
      "x-url" : "{endpoint}/v1/map/sastoken"
    },
    "/CreateCredential" : {
      "post" : {
        "tags" : [ "凭证管理" ],
        "summary" : "创建凭证",
        "description" : "该接口用于创建访问地图数据服务的凭证。",
        "operationId" : "CreateCredential",
        "responses" : {
          "200" : {
            "description" : "成功。",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/Credential"
                }
              }
            }
          },
          "400" : {
            "description" : "参数无效。"
          },
          "401" : {
            "description" : "认证失败。"
          },
          "403" : {
            "description" : "没有操作权限。"
          },
          "500" : {
            "description" : "内部服务错误。"
          },
          "503" : {
            "description" : "服务不可用。"
          }
        },
        "parameters" : [ {
          "name" : "X-Auth-Token",
          "in" : "header",
          "description" : "IAM用户的token,无需特殊权限。",
          "required" : true,
          "schema" : {
            "description" : "IAM用户的token,无需特殊权限。",
            "type" : "string"
          }
        }, {
          "name" : "Content-Type",
          "in" : "header",
          "description" : "该字段填为“application/json;charset=utf8”。",
          "required" : true,
          "schema" : {
            "description" : "该字段填为“application/json;charset=utf8”。",
            "type" : "string"
          }
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/CreateCredentialRequestBody"
              }
            }
          },
          "required" : false
        }
      },
      "x-method" : "post",
      "x-content-type" : "application/json;charset=UTF-8",
      "x-operationId" : "CreateCredential",
      "x-url" : "{endpoint}/v1/map/credentials"
    },
    "/ShowCredential" : {
      "get" : {
        "tags" : [ "凭证管理" ],
        "summary" : "查询凭证",
        "description" : "该接口用于查询访问地图数据服务的凭证。",
        "operationId" : "ShowCredential",
        "responses" : {
          "200" : {
            "description" : "成功。",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/CredentialsResp"
                }
              }
            }
          },
          "400" : {
            "description" : "参数无效。"
          },
          "401" : {
            "description" : "认证失败。"
          },
          "403" : {
            "description" : "没有操作权限。"
          },
          "404" : {
            "description" : "未找到相应的资源。"
          },
          "500" : {
            "description" : "内部服务错误。"
          },
          "503" : {
            "description" : "服务不可用。"
          }
        },
        "parameters" : [ {
          "name" : "X-Auth-Token",
          "in" : "header",
          "description" : "IAM用户的token,无需特殊权限。",
          "required" : true,
          "schema" : {
            "description" : "IAM用户的token,无需特殊权限。",
            "type" : "string"
          }
        }, {
          "name" : "Content-Type",
          "in" : "header",
          "description" : "该字段填为“application/json;charset=utf8”。",
          "required" : true,
          "schema" : {
            "description" : "该字段填为“application/json;charset=utf8”。",
            "type" : "string"
          }
        } ]
      },
      "x-method" : "get",
      "x-content-type" : "application/json;charset=UTF-8",
      "x-operationId" : "ShowCredential",
      "x-url" : "{endpoint}/v1/map/credentials"
    },
    "/DeleteCedential" : {
      "delete" : {
        "tags" : [ "凭证管理" ],
        "summary" : "删除凭证",
        "description" : "该接口用于删除访问地图数据服务的凭证。",
        "operationId" : "DeleteCedential",
        "responses" : {
          "204" : {
            "description" : "删除成功。"
          },
          "400" : {
            "description" : "参数无效。"
          },
          "401" : {
            "description" : "认证失败。"
          },
          "403" : {
            "description" : "没有操作权限。"
          },
          "404" : {
            "description" : "未找到相应的资源。"
          },
          "500" : {
            "description" : "内部服务错误。"
          },
          "503" : {
            "description" : "服务不可用。"
          }
        },
        "parameters" : [ {
          "name" : "clientid",
          "in" : "path",
          "description" : "待删除的key的id。",
          "required" : true,
          "schema" : {
            "description" : "待删除的key的id。",
            "type" : "string"
          }
        }, {
          "name" : "X-Auth-Token",
          "in" : "header",
          "description" : "IAM用户的token,无需特殊权限。",
          "required" : true,
          "schema" : {
            "description" : "IAM用户的token,无需特殊权限。",
            "type" : "string"
          }
        }, {
          "name" : "Content-Type",
          "in" : "header",
          "description" : "该字段填为“application/json;charset=utf8”。",
          "required" : true,
          "schema" : {
            "description" : "该字段填为“application/json;charset=utf8”。",
            "type" : "string"
          }
        } ]
      },
      "x-method" : "delete",
      "x-content-type" : "application/json;charset=UTF-8",
      "x-operationId" : "DeleteCedential",
      "x-url" : "{endpoint}/v1/map/credentials/{clientid}"
    },
    "/ShowMapTile" : {
      "get" : {
        "tags" : [ "获取地图瓦片" ],
        "summary" : "获取地图瓦片",
        "description" : "该接口用于获取地图瓦片。",
        "operationId" : "ShowMapTile",
        "responses" : {
          "200" : {
            "description" : "成功。",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "string",
                  "format" : "binary"
                }
              }
            },
            "headers" : {
              "Content-Type" : {
                "description" : "资源内容的类型,例如: image/png。",
                "type" : "string"
              }
            }
          },
          "202" : {
            "description" : "成功,返回此处无瓦片。",
            "headers" : {
              "Content-Type" : {
                "description" : "资源内容的类型,例如: image/png。",
                "type" : "string"
              }
            }
          },
          "400" : {
            "description" : "参数无效。"
          },
          "401" : {
            "description" : "认证失败。"
          },
          "403" : {
            "description" : "没有操作权限。"
          },
          "404" : {
            "description" : "未找到相应的资源。"
          },
          "500" : {
            "description" : "内部服务错误。"
          },
          "503" : {
            "description" : "服务不可用。"
          }
        },
        "parameters" : [ {
          "name" : "z",
          "in" : "path",
          "description" : "缩放级别,取值范围[0~20]。",
          "required" : true,
          "schema" : {
            "description" : "缩放级别,取值范围[0~20]。",
            "type" : "integer",
            "format" : "int32"
          }
        }, {
          "name" : "x",
          "in" : "path",
          "description" : "缩放网格上的 X 坐标。 值必须在 [0, 2的z次方-1] 范围内。",
          "required" : true,
          "schema" : {
            "description" : "缩放网格上的 X 坐标。 值必须在 [0, 2的z次方-1] 范围内。",
            "type" : "integer",
            "format" : "int32"
          }
        }, {
          "name" : "y",
          "in" : "path",
          "description" : "缩放网格上的 Y 坐标。 值必须在 [0, 2的z次方-1] 范围内。",
          "required" : true,
          "schema" : {
            "description" : "缩放网格上的 Y 坐标。 值必须在 [0, 2的z次方-1] 范围内。",
            "type" : "integer",
            "format" : "int32"
          }
        }, {
          "name" : "Authorization",
          "in" : "header",
          "description" : "签名消息头为:",
          "required" : true,
          "schema" : {
            "description" : "签名消息头为:",
            "type" : "string"
          }
        } ]
      },
      "x-method" : "get",
      "x-content-type" : "application/json;charset=UTF-8",
      "x-operationId" : "ShowMapTile",
      "x-url" : "{endpoint}/v1/map/tile/{z}/{x}/{y}"
    }
  }
}