{
  "openapi" : "3.0.0",
  "info" : {
    "description" : "SMSApi-短信能力开放",
    "title" : "SMSApi",
    "version" : "2025-07-30",
    "x-host_prefix" : "smsapi"
  },
  "servers" : [ {
    "url" : "/"
  } ],
  "components" : {
    "parameters" : {
      "Host" : {
        "name" : "Host",
        "in" : "header",
        "description" : "API调用目的地址,用于特殊AK/SK认证:如smsapi.cn-north-4.myhuaweicloud.com:443",
        "required" : true,
        "schema" : {
          "example" : "smsapi.cn-north-4.myhuaweicloud.com:443",
          "description" : "API调用目的地址,用于特殊AK/SK认证:如smsapi.cn-north-4.myhuaweicloud.com:443",
          "type" : "string",
          "maxLength" : 128,
          "minLength" : 1
        },
        "type" : "object"
      },
      "Authorization" : {
        "name" : "Authorization",
        "in" : "header",
        "description" : "Authorization, 通过特殊AK/SK方式认证,format : SDK-HMAC-SHA256 Access=${appKey}, SignedHeaders=content-type;host;x-sdk-date, Signature=${signature} ; see : https://support.huaweicloud.com/api-msgsms/sms_05_0046.html。",
        "required" : true,
        "schema" : {
          "example" : "SDK-HMAC-SHA256 Access=uxOF5yvM0H3C0t5G0xc272g7hA2I, SignedHeaders= content-type;host;x-sdk-date, Signature=49597a23512f888853627ffff343000505600c01424c89fb2ae80d182330a7ab",
          "description" : "Authorization, 通过特殊AK/SK方式认证,format : SDK-HMAC-SHA256 Access=${appKey}, SignedHeaders=content-type;host;x-sdk-date, Signature=${signature} ; see : https://support.huaweicloud.com/api-msgsms/sms_05_0046.html。",
          "type" : "string",
          "maxLength" : 2048,
          "minLength" : 90
        },
        "type" : "object"
      },
      "X-Sdk-Date" : {
        "name" : "X-Sdk-Date",
        "in" : "header",
        "description" : "AK/SK认证必选,时间格式为:20191115T033655Z",
        "required" : true,
        "schema" : {
          "example" : "20191115T033655Z",
          "description" : "AK/SK认证必选,时间格式为:20191115T033655Z",
          "type" : "string",
          "maxLength" : 20,
          "minLength" : 1
        },
        "type" : "object"
      }
    },
    "schemas" : {
      "SmsID" : {
        "type" : "object",
        "properties" : {
          "createTime" : {
            "type" : "string",
            "description" : "创建时间",
            "example" : "2023-05-05T07:21:30Z",
            "minLength" : 1,
            "maxLength" : 20
          },
          "from" : {
            "type" : "string",
            "description" : "发送短信号码",
            "example" : "88998899******",
            "minLength" : 1,
            "maxLength" : 21
          },
          "originTo" : {
            "type" : "string",
            "description" : "接收短信号码",
            "example" : "137****8774",
            "minLength" : 1,
            "maxLength" : 21
          },
          "smsMsgId" : {
            "type" : "string",
            "description" : "短信id",
            "example" : "77be180f-85dd-4912-9a23-******",
            "minLength" : 1,
            "maxLength" : 50
          },
          "status" : {
            "type" : "string",
            "description" : "短信当前状态",
            "example" : "000000",
            "minLength" : 1,
            "maxLength" : 7
          },
          "countryId" : {
            "type" : "string",
            "description" : "国家码",
            "example" : "FR",
            "minLength" : 1,
            "maxLength" : 3
          },
          "total" : {
            "type" : "integer",
            "description" : "短信拆分条数",
            "example" : 2
          }
        }
      },
      "BatchSendSmsResponseBody" : {
        "type" : "object",
        "properties" : {
          "code" : {
            "type" : "string",
            "description" : "错误码",
            "example" : "000000",
            "minLength" : 1,
            "maxLength" : 7
          },
          "description" : {
            "type" : "string",
            "description" : "错误描述",
            "example" : "Success",
            "minLength" : 1,
            "maxLength" : 512
          },
          "result" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/SmsID"
            },
            "minItems" : 0,
            "maxItems" : 1000,
            "description" : "短信状态"
          }
        }
      },
      "BatchSendDiffSmsRequestBody" : {
        "description" : "批量发送短信的请求body数据结构",
        "type" : "object",
        "properties" : {
          "from" : {
            "type" : "string",
            "description" : "短信发送方的号码",
            "example" : "8823031633187",
            "minLength" : 1,
            "maxLength" : 21
          },
          "statusCallback" : {
            "type" : "string",
            "description" : "SP的回调地址,用于单条接收短信状态报告",
            "example" : "https://demo.callback.huawei.com",
            "minLength" : 1,
            "maxLength" : 1024
          },
          "smsContent" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/SmsContent"
            },
            "description" : "短信内容",
            "minItems" : 1,
            "maxItems" : 1024
          },
          "extend" : {
            "type" : "string",
            "description" : "扩展参数",
            "example" : "any text",
            "minLength" : 1,
            "maxLength" : 128
          }
        }
      },
      "SmsContent" : {
        "type" : "object",
        "properties" : {
          "to" : {
            "type" : "array",
            "items" : {
              "type" : "string",
              "example" : "+86131****1234",
              "minLength" : 1,
              "maxLength" : 21
            },
            "minItems" : 1,
            "maxItems" : 1000,
            "description" : "群发短信接收方的号码"
          },
          "templateId" : {
            "type" : "string",
            "description" : "短信模板ID",
            "example" : "79948563bcba4e49aa6f2ba7f******",
            "minLength" : 1,
            "maxLength" : 32
          },
          "templateParas" : {
            "type" : "array",
            "items" : {
              "type" : "string",
              "example" : "123",
              "minLength" : 1,
              "maxLength" : 1000
            },
            "minItems" : 1,
            "maxItems" : 20,
            "description" : "短信模板的变量值列表"
          },
          "signature" : {
            "type" : "string",
            "description" : "短信签名",
            "example" : "华为云",
            "minLength" : 0,
            "maxLength" : 32
          }
        }
      }
    },
    "securitySchemes" : { }
  },
  "paths" : {
    "/BatchSendSms" : {
      "post" : {
        "tags" : [ "短信能力开放" ],
        "summary" : "发送短信",
        "description" : "## 典型场景 ##",
        "operationId" : "BatchSendSms",
        "deprecated" : false,
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/BatchSendSmsResponseBody"
                }
              }
            }
          },
          "201" : {
            "description" : "Created"
          },
          "401" : {
            "description" : "Unauthorized"
          },
          "403" : {
            "description" : "Forbidden"
          },
          "404" : {
            "description" : "Not Found"
          }
        },
        "parameters" : [ {
          "name" : "from",
          "in" : "formData",
          "description" : "短信发送方的号码",
          "required" : false,
          "schema" : {
            "description" : "短信发送方的号码",
            "type" : "string",
            "maxLength" : 21,
            "minLength" : 1
          }
        }, {
          "name" : "to",
          "in" : "formData",
          "description" : "短信接收方的号码",
          "required" : false,
          "schema" : {
            "description" : "短信接收方的号码",
            "type" : "string",
            "maxLength" : 21999,
            "minLength" : 1
          }
        }, {
          "name" : "templateId",
          "in" : "formData",
          "description" : "短信模板ID",
          "required" : false,
          "schema" : {
            "description" : "短信模板ID",
            "type" : "string",
            "maxLength" : 32,
            "minLength" : 1
          }
        }, {
          "name" : "templateParas",
          "in" : "formData",
          "description" : "短信模板的变量值",
          "required" : false,
          "schema" : {
            "description" : "短信模板的变量值",
            "type" : "string",
            "maxLength" : 2000,
            "minLength" : 1
          }
        }, {
          "name" : "statusCallback",
          "in" : "formData",
          "description" : "SP的回调地址",
          "required" : false,
          "schema" : {
            "description" : "SP的回调地址",
            "type" : "string",
            "maxLength" : 1024,
            "minLength" : 1
          }
        }, {
          "name" : "extend",
          "in" : "formData",
          "description" : "扩展参数,在状态报告中会原样返回。",
          "required" : false,
          "schema" : {
            "description" : "扩展参数,在状态报告中会原样返回。",
            "type" : "string",
            "maxLength" : 128,
            "minLength" : 1
          }
        }, {
          "name" : "signature",
          "in" : "formData",
          "description" : "短信签名",
          "required" : false,
          "schema" : {
            "description" : "短信签名",
            "type" : "string",
            "maxLength" : 32,
            "minLength" : 0
          }
        } ]
      },
      "x-method" : "post",
      "x-content-type" : "application/json;charset=UTF-8",
      "x-operationId" : "BatchSendSms",
      "x-url" : "{endpoint}/sms/batchSendSms/v1"
    },
    "/BatchSendDiffSms" : {
      "post" : {
        "tags" : [ "短信能力开放" ],
        "summary" : "发送分批短信",
        "description" : "发送分批短信",
        "operationId" : "BatchSendDiffSms",
        "deprecated" : false,
        "responses" : {
          "200" : {
            "description" : "OK",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/BatchSendSmsResponseBody"
                }
              }
            }
          },
          "201" : {
            "description" : "Created"
          },
          "401" : {
            "description" : "Unauthorized"
          },
          "403" : {
            "description" : "Forbidden"
          },
          "404" : {
            "description" : "Not Found"
          }
        },
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/BatchSendDiffSmsRequestBody"
              }
            }
          },
          "required" : true
        }
      },
      "x-method" : "post",
      "x-content-type" : "application/json;charset=UTF-8",
      "x-operationId" : "BatchSendDiffSms",
      "x-url" : "{endpoint}/sms/batchSendDiffSms/v1"
    }
  }
}