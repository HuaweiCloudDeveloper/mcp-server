{
  "openapi" : "3.0.0",
  "info" : {
    "description" : "OROAS-OROAS Service",
    "title" : "OROAS",
    "version" : "2025-06-13",
    "x-host_prefix": "oroas"
  },
  "servers" : [ {
    "url" : "/"
  } ],
  "components" : {
    "parameters" : {
      "X-Apig-AppCode" : {
        "name" : "X-Apig-AppCode",
        "in" : "header",
        "description" : "用户凭证",
        "required" : true,
        "schema" : {
          "description" : "用户凭证",
          "type" : "string"
        },
        "type" : "object"
      }
    },
    "schemas" : {
      "TaskDto" : {
        "description" : "任务请求信息",
        "type" : "object",
        "required" : [ "input_json" ],
        "properties" : {
          "input_json" : {
            "description" : "任务输入信息,json格式;每个子服务该对象结构不同,框架层不解析具体key,运行态直接透传给子服务REST API处理(参数合法性校验 只能子服务镜像内进行;当前算法镜像提供单独校验接口和处理接口,后续待统一交互机制)",
            "type" : "object"
          },
          "input_url" : {
            "description" : "任务输入信息为文件格式,传入值为租户OBS对应的文件绝对路径;在请求信息大于12MB情形使用该参数,需用户在Console进行OBS委托授权方可使用(和input_json二选一),暂不开放该功能",
            "minLength" : 0,
            "maxLength" : 512,
            "type" : "string"
          },
          "output_url" : {
            "description" : "任务输出信息为文件格式,传入值为租户OBS对应的待存储路径前缀(和input_url成对使用),文件名服务端固定用task_id命名;在响应信息大于12MB情形使用该参数,需用户在Console进行OBS委托授权方可使用,暂不开放该功能",
            "minLength" : 0,
            "maxLength" : 512,
            "type" : "string"
          }
        }
      },
      "CreatTaskSuccessResult" : {
        "type" : "object",
        "description" : "创建任务返回信息",
        "required" : [ "task_id" ],
        "properties" : {
          "task_id" : {
            "type" : "string",
            "example" : "86cbefe9-2adc-4186-b11b-dd4e4aabc36d",
            "description" : "任务编号",
            "minLength" : 36,
            "maxLength" : 36
          }
        }
      },
      "TaskListVo" : {
        "description" : "任务列表视图",
        "type" : "object",
        "required" : [ "count", "tasks" ],
        "properties" : {
          "count" : {
            "type" : "integer",
            "format" : "int32",
            "description" : "数量",
            "minimum" : 0,
            "maximum" : 300,
            "example" : 1
          },
          "tasks" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/TaskListItemVo"
            },
            "description" : "任务列表项视图"
          }
        }
      },
      "TaskListItemVo" : {
        "type" : "object",
        "description" : "任务列表项视图",
        "properties" : {
          "id" : {
            "type" : "string",
            "example" : "86cbefe9-2adc-4186-b11b-dd4e4aabc36d",
            "description" : "任务编号",
            "minLength" : 36,
            "maxLength" : 36
          },
          "status" : {
            "type" : "string",
            "example" : "Running",
            "description" : "状态",
            "enum" : [ "Running", "Failed", "Successed" ]
          },
          "start_time" : {
            "type" : "string",
            "description" : "开始时间(UTC)",
            "format" : "date-time",
            "example" : "2021-08-10T05:58:05Z"
          },
          "end_time" : {
            "type" : "string",
            "description" : "结束时间(UTC)",
            "format" : "date-time",
            "example" : "2021-08-10T05:58:05Z"
          },
          "create_time" : {
            "type" : "string",
            "description" : "创建时间(UTC)",
            "format" : "date-time",
            "example" : "2021-08-10T05:58:05Z"
          }
        }
      },
      "TaskDetailVo" : {
        "type" : "object",
        "description" : "任务详细信息",
        "required" : [ "task_id", "status", "start_time", "end_time", "output_json" ],
        "properties" : {
          "task_id" : {
            "type" : "string",
            "example" : "86cbefe9-2adc-4186-b11b-dd4e4aabc36d",
            "description" : "任务编号",
            "minLength" : 36,
            "maxLength" : 36
          },
          "status" : {
            "type" : "string",
            "example" : "Running",
            "description" : "任务运行状态,暂考虑取值仅为 Running/Failed/Successed",
            "enum" : [ "Running", "Failed", "Successed" ]
          },
          "input_json" : {
            "type" : "object",
            "example" : null,
            "description" : "如果提交任务使用了input_enable参数,并且创建任务使用的是json格式非文件方式,该值为输入的字符串; 对应数据结构参见创建任务时的结构体"
          },
          "input_url" : {
            "type" : "string",
            "example" : null,
            "description" : "如果提交任务使用了input_enable参数,并且创建任务使用的是文件方式,该值为OBS对应的文件绝对路径",
            "minLength" : 0,
            "maxLength" : 512
          },
          "start_time" : {
            "type" : "string",
            "description" : "开始时间(UTC)",
            "format" : "date-time",
            "example" : "2021-08-10T05:58:05Z"
          },
          "end_time" : {
            "type" : "string",
            "description" : "结束时间(UTC)",
            "format" : "date-time",
            "example" : "2021-08-10T05:58:05Z"
          },
          "create_time" : {
            "type" : "string",
            "description" : "创建时间(UTC)",
            "format" : "date-time",
            "example" : "2021-08-10T05:58:05Z"
          },
          "output_json" : {
            "type" : "object",
            "description" : "任务处理结果,json格式;每个子服务该对象结构不同,框架层不解析具体key,运行态直接拷贝算法服务返回信息、"
          },
          "output_url" : {
            "type" : "string",
            "description" : "任务结果文件对应的绝对地址,具体值由租户OBS对应的待存储路径前缀和文件名组成,文件名服务端固定用task_id命名",
            "minLength" : 0,
            "maxLength" : 512
          }
        }
      }
    },
    "securitySchemes" : { }
  },
  "paths" : {
    "/CreateTask" : {
      "post" : {
        "tags" : [ "OROAS Service" ],
        "summary" : "创建任务",
        "description" : "创建任务",
        "operationId" : "CreateTask",
        "responses" : {
          "201" : {
            "description" : "创建成功响应信息",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/CreatTaskSuccessResult"
                }
              }
            }
          },
          "400" : {
            "description" : "客户端错误响应信息",
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "string"
                }
              }
            }
          }
        },
        "parameters" : [ {
          "$ref" : "#/components/parameters/X-Apig-AppCode"
        }, {
          "name" : "project_id",
          "in" : "path",
          "description" : "项目ID",
          "required" : true,
          "schema" : {
            "description" : "项目ID",
            "type" : "string",
            "maxLength" : 32,
            "minLength" : 32
          }
        }, {
          "name" : "service_group",
          "in" : "path",
          "description" : "服务类别,针对不同服务类场景,为用户提前填充对应值,用户侧不需单独赋值;当前仅支持 二维切割 2dcut ,便于后续扩展",
          "required" : true,
          "schema" : {
            "description" : "服务类别,针对不同服务类场景,为用户提前填充对应值,用户侧不需单独赋值;当前仅支持 二维切割 2dcut ,便于后续扩展",
            "type" : "string",
            "maxLength" : 128,
            "minLength" : 0
          }
        }, {
          "name" : "service_type",
          "in" : "path",
          "description" : "子服务类型,针对不同服务,为用户提前填充对应值,用户侧不需单独赋值;服装切割固定为 irregular-textile,雕刻机切割固定为 engraving-machine-cutting, 板材切割固定为 regular-plate",
          "required" : true,
          "schema" : {
            "description" : "子服务类型,针对不同服务,为用户提前填充对应值,用户侧不需单独赋值;服装切割固定为 irregular-textile,雕刻机切割固定为 engraving-machine-cutting, 板材切割固定为 regular-plate",
            "type" : "string",
            "maxLength" : 128,
            "minLength" : 0
          }
        } ],
        "requestBody" : {
          "content" : {
            "application/json;charset=utf-8" : {
              "schema" : {
                "$ref" : "#/components/schemas/TaskDto"
              }
            }
          },
          "required" : true
        }
      },
      "x-method" : "post",
      "x-content-type" : "application/json;charset=UTF-8",
      "x-operationId" : "CreateTask",
      "x-url" : "{endpoint}/v1/{project_id}/oroas/{service_group}/{service_type}/tasks"
    },
    "/ListTask" : {
      "get" : {
        "tags" : [ "OROAS Service" ],
        "summary" : "查询任务列表",
        "description" : "查询任务列表",
        "operationId" : "ListTask",
        "responses" : {
          "200" : {
            "description" : "任务列表视图",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/TaskListVo"
                }
              }
            }
          },
          "400" : {
            "description" : ""
          }
        },
        "parameters" : [ {
          "$ref" : "#/components/parameters/X-Apig-AppCode"
        }, {
          "name" : "project_id",
          "in" : "path",
          "description" : "项目ID",
          "required" : true,
          "schema" : {
            "description" : "项目ID",
            "type" : "string",
            "maxLength" : 32,
            "minLength" : 32
          }
        }, {
          "name" : "service_group",
          "in" : "path",
          "description" : "服务类别,针对不同服务类场景,为用户提前填充对应值,用户侧不需单独赋值;当前仅支持 二维切割 2dcut ,便于后续扩展",
          "required" : true,
          "schema" : {
            "description" : "服务类别,针对不同服务类场景,为用户提前填充对应值,用户侧不需单独赋值;当前仅支持 二维切割 2dcut ,便于后续扩展",
            "type" : "string",
            "maxLength" : 128,
            "minLength" : 0
          }
        }, {
          "name" : "service_type",
          "in" : "path",
          "description" : "子服务类型,针对不同服务,为用户提前填充对应值,用户侧不需单独赋值;服装切割固定为 irregular-textile,雕刻机切割固定为 engraving-machine-cutting, 板材切割固定为 regular-plate",
          "required" : true,
          "schema" : {
            "description" : "子服务类型,针对不同服务,为用户提前填充对应值,用户侧不需单独赋值;服装切割固定为 irregular-textile,雕刻机切割固定为 engraving-machine-cutting, 板材切割固定为 regular-plate",
            "type" : "string",
            "maxLength" : 128,
            "minLength" : 0
          }
        }, {
          "name" : "limit",
          "in" : "query",
          "description" : "限制量,单次查询总量,必须由数字组成,默认为300,取值范围[1,300]",
          "required" : false,
          "schema" : {
            "description" : "限制量,单次查询总量,必须由数字组成,默认为300,取值范围[1,300]",
            "type" : "integer",
            "default" : 300,
            "maximum" : 300,
            "minimum" : 1
          }
        }, {
          "name" : "offset",
          "in" : "query",
          "description" : "偏移量,查询起始偏移,必须由数字组成,默认为0,取值范围[0,100000000]",
          "required" : false,
          "schema" : {
            "description" : "偏移量,查询起始偏移,必须由数字组成,默认为0,取值范围[0,100000000]",
            "type" : "integer",
            "default" : 0,
            "maximum" : 100000000,
            "minimum" : 0
          }
        } ]
      },
      "x-method" : "get",
      "x-content-type" : "application/json;charset=UTF-8",
      "x-operationId" : "ListTask",
      "x-url" : "{endpoint}/v1/{project_id}/oroas/{service_group}/{service_type}/tasks"
    },
    "/ShowTask" : {
      "get" : {
        "tags" : [ "OROAS Service" ],
        "summary" : "获取任务详情",
        "description" : "获取任务详情",
        "operationId" : "ShowTask",
        "responses" : {
          "200" : {
            "description" : "任务详情信息",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/TaskDetailVo"
                }
              }
            }
          },
          "400" : {
            "description" : ""
          }
        },
        "parameters" : [ {
          "$ref" : "#/components/parameters/X-Apig-AppCode"
        }, {
          "name" : "project_id",
          "in" : "path",
          "description" : "项目ID",
          "required" : true,
          "schema" : {
            "description" : "项目ID",
            "type" : "string",
            "maxLength" : 32,
            "minLength" : 32
          }
        }, {
          "name" : "service_group",
          "in" : "path",
          "description" : "服务类别,针对不同服务类场景,为用户提前填充对应值,用户侧不需单独赋值;当前仅支持 二维切割 2dcut ,便于后续扩展",
          "required" : true,
          "schema" : {
            "description" : "服务类别,针对不同服务类场景,为用户提前填充对应值,用户侧不需单独赋值;当前仅支持 二维切割 2dcut ,便于后续扩展",
            "type" : "string",
            "maxLength" : 128,
            "minLength" : 0
          }
        }, {
          "name" : "service_type",
          "in" : "path",
          "description" : "子服务类型,针对不同服务,为用户提前填充对应值,用户侧不需单独赋值;服装切割固定为 irregular-textile,雕刻机切割固定为 engraving-machine-cutting, 板材切割固定为 regular-plate",
          "required" : true,
          "schema" : {
            "description" : "子服务类型,针对不同服务,为用户提前填充对应值,用户侧不需单独赋值;服装切割固定为 irregular-textile,雕刻机切割固定为 engraving-machine-cutting, 板材切割固定为 regular-plate",
            "type" : "string",
            "maxLength" : 512,
            "minLength" : 0
          }
        }, {
          "name" : "task_id",
          "in" : "path",
          "description" : "任务id",
          "required" : true,
          "schema" : {
            "description" : "任务id",
            "type" : "string",
            "maxLength" : 36,
            "minLength" : 36
          }
        }, {
          "name" : "input_enable",
          "in" : "query",
          "description" : "是否返回输入信息,默认为false; 当前暂不支持该功能,后续扩展",
          "required" : false,
          "schema" : {
            "description" : "是否返回输入信息,默认为false; 当前暂不支持该功能,后续扩展",
            "type" : "boolean"
          }
        } ]
      },
      "x-method" : "get",
      "x-content-type" : "application/json;charset=UTF-8",
      "x-operationId" : "ShowTask",
      "x-url" : "{endpoint}/v1/{project_id}/oroas/{service_group}/{service_type}/tasks/{task_id}"
    },
    "/DeleteTask" : {
      "delete" : {
        "tags" : [ "OROAS Service" ],
        "summary" : "删除任务",
        "description" : "删除任务",
        "operationId" : "DeleteTask",
        "responses" : {
          "200" : {
            "description" : "OK"
          },
          "400" : {
            "description" : ""
          }
        },
        "parameters" : [ {
          "$ref" : "#/components/parameters/X-Apig-AppCode"
        }, {
          "name" : "project_id",
          "in" : "path",
          "description" : "项目ID",
          "required" : true,
          "schema" : {
            "description" : "项目ID",
            "type" : "string"
          }
        }, {
          "name" : "service_group",
          "in" : "path",
          "description" : "服务类别,针对不同服务类场景,为用户提前填充对应值,用户侧不需单独赋值;当前仅支持 二维切割 2dcut ,便于后续扩展",
          "required" : true,
          "schema" : {
            "description" : "服务类别,针对不同服务类场景,为用户提前填充对应值,用户侧不需单独赋值;当前仅支持 二维切割 2dcut ,便于后续扩展",
            "type" : "string"
          }
        }, {
          "name" : "service_type",
          "in" : "path",
          "description" : "子服务类型,针对不同服务,为用户提前填充对应值,用户侧不需单独赋值;服装切割固定为 irregular-textile,雕刻机切割固定为 engraving-machine-cutting, 板材切割固定为 regular-plate",
          "required" : true,
          "schema" : {
            "description" : "子服务类型,针对不同服务,为用户提前填充对应值,用户侧不需单独赋值;服装切割固定为 irregular-textile,雕刻机切割固定为 engraving-machine-cutting, 板材切割固定为 regular-plate",
            "type" : "string"
          }
        }, {
          "name" : "task_id",
          "in" : "path",
          "description" : "任务id",
          "required" : true,
          "schema" : {
            "description" : "任务id",
            "type" : "string"
          }
        } ]
      },
      "x-method" : "delete",
      "x-content-type" : "application/json;charset=UTF-8",
      "x-operationId" : "DeleteTask",
      "x-url" : "{endpoint}/v1/{project_id}/oroas/{service_group}/{service_type}/tasks/{task_id}"
    }
  }
}